<div class="container">
  <div class="d-flex flex-row">
    <div class="col-sm-6 me-4">
      <div class="text-center">
        <% if @user.image %>
            <img src="<%= @user.image %>" class="rounded-circle" alt="Image de profil" style="width: 100px; height: 100px;">
        <% else %>
            <img src="app/assets/images/user_avatar.png" class="rounded-circle" alt="Image de profil par défaut">
        <% end %>
        <h1 class="text-start">Profil</h1>
      </div>
      <p>Nom: <%= @user.name %> </p>
      <p>Adresse: <%= @user.address %></p>
      <p>N° Téléphone: <%= @user.phone_number %></p>
      <p>Email: <%= @user.email %></p>
      <p>Note: <%= @user.rating %>/5</p>
      <h3 class="mt-4">Commentaires</h3>
      <div><% @comments.each do |comment| %>
        <div class="card mt-5 p-4">
          <div class="d-flex flex-row ">
            <div class="col-sm-6 text-start">
              <img src=<%= comment.author.image %>  class=" rounded-circle" style="width:35px; height:35px;">
            </div>
            <div class="col-sm-6 text-end">
              <%= comment.author.name %>
            </div>
          </div>
          <div class="">
          Commentaire:<%= comment.content %> <br>
          Note: <%= comment.rating %>
          </div>
          <%=  link_to "Effacer", comment_path(comment),
          data: {turbo_method: :delete, turbo_confirm: "Are you sure?"}, class:"btn btn-danger ms-5 p-1 m-2"%>
        </div><% end %>
      </div>
    </div>
    <div class="col-sm-6 ms-2">
      <% if current_user != @user %>
        <div class="mt-2 form-control me-5">
          <h3>Ajouter un nouveau commentaire</h3>
          <%= simple_form_for ([@user, Comment.new(target: @user)]) do |f| %>
            <%= f.input :content %>
            <%= f.input :rating %>
            <%= f.submit %>
          <% end %>
        </div>
      <% else %>
        <p>Vous ne pouvez pas commenter votre propre profil.</p>
      <% end %>
    </div>
  </div>
</div>
